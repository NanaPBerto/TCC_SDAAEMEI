<div class="container cadastro-atividade py-4">
  <div class="cadastro-container">
    <div class="cadastro-card">
      <div class="cadastro-header">
        <h1>
          <i class="fas fa-music me-2"></i>
          {{#if atividade}}Editar Atividade{{else}}Cadastrar Nova Atividade{{/if}}
        </h1>
        <p class="subtitle">Preencha os dados da atividade musical</p>
      </div>

      <form action="{{#if edicao}}/editar/{{atividade.id}}{{else}}/novaAtividade{{/if}}" method="POST" enctype="multipart/form-data" class="cadastro-form" id="formAtividade">
        <!-- Seção: Informações Básicas -->
        <div class="form-section">
          <h5><i class="fas fa-info-circle me-2"></i>Informações Básicas</h5>
          <div class="row g-3 align-items-end">
            <div class="col-md-12">
              <label for="tituloAtividade" class="form-label">Título da Atividade</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-medal"></i></span>
                <input type="text" class="form-control" id="tituloAtividade" name="nome" 
                       placeholder="Exemplo: Ritmo com Copos, Cantiga de Roda" required 
                       value="{{#if atividade}}{{atividade.nome}}{{/if}}">
              </div>
            </div>
          </div>
        </div>

        <!-- Seção: Tipos de Atividade (Múltipla Seleção) -->
        <div class="form-section">
          <h5><i class="fas fa-tags me-2"></i>Tipos de Atividade</h5>
          <p class="text-muted small mb-3">Selecione um ou mais tipos que se aplicam à sua atividade</p>
          <div class="tipos-container row g-2">
            {{#each tipos}}
              <div class="col-md-3 mb-2">
                <div class="tipo-option card h-100">
                  <div class="card-body p-3 text-center d-flex align-items-center justify-content-start">
                  <label for="tipo{{id}}" class="form-check-label cursor-pointer ms-2 d-flex flex-row-reverse align-items-center w-100" style="margin-bottom:0;">
                    <input type="checkbox" name="tipos" value="{{id}}" id="tipo{{id}}"
                       class="form-check-input ms-2"
                        {{#if ../atividade}}
                          {{#if (includes ../atividade.tiposSelecionados id)}}checked{{/if}}
                       {{/if}}>
                       {{nome}}
                     </span>
                  </label>
                  </div>
                </div>
              </div>
            {{/each}}
          </div>
        </div>
        <!-- Seção: Descrição e Objetivos -->
        <div class="form-section">
          <h5></i>Descrição e Objetivos</h5>
          <div class="row g-3">
            <div class="col-12">
              <label for="descricaoAtividade" class="form-label">Descrição da Atividade</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-align-left"></i></span>
                <textarea class="form-control" id="descricaoAtividade" name="descricao" rows="4" 
                          placeholder="Descreva detalhadamente como a atividade será realizada, passo a passo..." required> {{#if atividade}} {{atividade.descricao}} {{/if}} </textarea>
              </div>
            </div>
            <div class="col-12">
              <label for="objetivoAtividade" class="form-label">Objetivos Educacionais</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-bullseye me-2"></i></span>
                <textarea class="form-control" id="objetivoAtividade" name="objetivo" rows="4" 
                          placeholder="Quais habilidades e competências serão desenvolvidas com esta atividade?" required> {{#if atividade}} {{atividade.objetivo}} {{/if}} </textarea>
              </div>
            </div>
          </div>
        </div>

        <!-- Seção: Configurações -->
        <div class="form-section">
          <h5>Categorias</h5>
          <div class="row g-3">
            <div class="col-md-4">
              <label for="classificacaoAtividade" class="form-label">Faixa Etária</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-child"></i></span>
                   <select class="form-select" id="classificacaoAtividade" name="classificacao" required>
      <option value="" disabled selected>Selecione a faixa etária</option>
      <option value="berçário I" {{#if atividade}}{{#if (eq atividade.classificacao 1)}}selected{{/if}}{{/if}}>berçário I</option>
      <option value="berçário II" {{#if atividade}}{{#if (eq atividade.classificacao 2)}}selected{{/if}}{{/if}}>berçário II</option>
      <option value="berçário III" {{#if atividade}}{{#if (eq atividade.classificacao 3)}}selected{{/if}}{{/if}}>berçário III</option>
      <option value="maternal I" {{#if atividade}}{{#if (eq atividade.classificacao 4)}}selected{{/if}}{{/if}}>maternal I</option>
      <option value="maternal II" {{#if atividade}}{{#if (eq atividade.classificacao 5)}}selected{{/if}}{{/if}}>maternal II</option>
      <option value="pré I" {{#if atividade}}{{#if (eq atividade.classificacao 6)}}selected{{/if}}{{/if}}>pré I</option>
      <option value="pré II" {{#if atividade}}{{#if (eq atividade.classificacao 7)}}selected{{/if}}{{/if}}>pré II</option>
    </select>
              </div>
            </div>
            <div class="col-md-4">
              <label for="duracaoAtividade" class="form-label">Duração Estimada</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-clock"></i></span>
                <select class="form-select" id="duracaoAtividade" name="duracao" required value="{{#if atividade}} {{atividade.duracao}} {{/if}}">
                  <option value="" disabled selected>Selecione a duração</option>
                  <option value="5-15 min" {{#if atividade}} {{#if (eq atividade.duracao "5-15 min")}} selected {{/if}} {{/if}}>5-15 minutos</option>
                  <option value="15-30 min" {{#if atividade}} {{#if (eq atividade.duracao "15-30 min")}} selected {{/if}} {{/if}}>15-30 minutos</option>
                  <option value="30+ min" {{#if atividade}} {{#if (eq atividade.duracao "30+ min")}} selected {{/if}} {{/if}}>Mais de 30 minutos</option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <label for="integrantesAtividade" class="form-label">Número de Participantes</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-users"></i></span>
                <select class="form-select" id="integrantesAtividade" name="vagas" required value="{{#if atividade}} {{atividade.vagas}} {{/if}}">
                  <option value="" disabled selected>Selecione o número</option>
                  <option value="1-5" {{#if atividade}} {{#if (eq atividade.vagas "1-5")}} selected {{/if}} {{/if}}>1-5 participantes</option>
                  <option value="5-10" {{#if atividade}} {{#if (eq atividade.vagas "5-10")}} selected {{/if}} {{/if}}>5-10 participantes</option>
                  <option value="10-15" {{#if atividade}} {{#if (eq atividade.vagas "10-15")}} selected {{/if}} {{/if}}>10-15 participantes</option>
                  <option value="15-20" {{#if atividade}} {{#if (eq atividade.vagas "15-20")}} selected {{/if}} {{/if}}>15-20 participantes</option>
                  <option value="20-25" {{#if atividade}} {{#if (eq atividade.vagas "20-25")}} selected {{/if}} {{/if}}>20-25 participantes</option>
                  <option value="25-30" {{#if atividade}} {{#if (eq atividade.vagas "25-30")}} selected {{/if}} {{/if}}>25-30 participantes</option>
                  <option value="+30" {{#if atividade}} {{#if (eq atividade.vagas "+30")}} selected {{/if}} {{/if}}>Mais de 30 participantes</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Seção: Recursos e Condições -->
        <div class="form-section">
          <h5>Recursos e Condições</h5>
          <div class="row g-3">
            <div class="col-12">
              <label for="indicacaoAtividade" class="form-label">Nível de Dificuldade</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-star"></i></span>
                <input type="text" class="form-control" id="indicacaoAtividade" name="indicacao" 
                       placeholder="Ex: Iniciante, Intermediário, Avançado" value="{{#if atividade}} {{atividade.indicacao}} {{/if}}" required>
              </div>
            </div>
            <div class="col-12">
              <label for="recursosAtividade" class="form-label">Materiais Necessários</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-toolbox"></i></span>
                <textarea class="form-control" id="recursosAtividade" name="recursos" rows="3" 
                          placeholder="Liste todos os materiais e recursos necessários para a atividade..." required>{{#if atividade}} {{atividade.recursos}} {{/if}}</textarea>
              </div>
            </div>
            <div class="col-12">
              <label for="condicoesAtividade" class="form-label">Condições de Execução</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-clipboard-check"></i></span>
                <textarea class="form-control" id="condicoesAtividade" name="condicoes" rows="3" 
                          placeholder="Descreva as condições ideais para realizar a atividade (espaço, ambiente, etc)..." required>{{#if atividade}} {{atividade.condicoes}} {{/if}}</textarea>
              </div>
            </div>
            <div class="col-12">
              <label for="obsAtividade" class="form-label">Observações Adicionais</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-sticky-note"></i></span>
                <textarea class="form-control" id="obsAtividade" name="obs" rows="3" 
                          placeholder="Informações complementares, dicas ou observações importantes...">{{#if atividade}} {{atividade.obs}} {{/if}}</textarea>
              </div>
            </div>
          </div>
        </div>
 <!-- Seção: Mídias -->
        <div class="form-section">  
        <h5><i class="fas fa-paperclip me-2"></i>Anexos</h5>
  <div class="col-md-12">
    <label class="form-label">Foto principal</label>
    <input type="file" class="form-control" name="imagem" accept="image/*">
    {{#if edicao}}
      {{#if atividade.imagem}}
      <small class="text-muted d-block mt-1">
        <i class="fas fa-file-image me-1"></i>
        Arquivo atual: <a href="{{atividade.imagem}}" target="_blank">Visualizar</a>
      </small>
      {{/if}}
    {{/if}}
  </div>
  <div class="col-md-12">
    <label class="form-label">Partitura</label>
    <input type="file" class="form-control" name="partitura" accept=".pdf,image/*">
    {{#if edicao}}
      {{#if atividade.partitura}}
      <small class="text-muted d-block mt-1">
        <i class="fas fa-file-pdf me-1"></i>
        Arquivo atual: <a href="{{atividade.partitura}}" target="_blank">Visualizar</a>
      </small>
      {{/if}}
    {{/if}}
  </div>
  <div class="col-md-12">
    <label class="form-label">Áudio</label>
    <input type="file" class="form-control" name="musica" accept="audio/*">
    {{#if edicao}}
      {{#if atividade.musica}}
      <small class="text-muted d-block mt-1">
        <i class="fas fa-file-audio me-1"></i>
        Arquivo atual: <a href="{{atividade.musica}}" target="_blank">Visualizar</a>
      </small>
      {{/if}}
    {{/if}}
  </div>
</div>

        {{#if edicao}}
          <input type="hidden" name="imagemAtual" value="{{atividade.imagem}}">
          <input type="hidden" name="partituraAtual" value="{{atividade.partitura}}">
          <input type="hidden" name="musicaAtual" value="{{atividade.musica}}">
          <input type="hidden" name="videoAtual" value="{{atividade.video}}">
        {{/if}}

        <!-- Botões de Ação -->
        <div class="cadastro-actions">
          <button type="reset" class="btn-atividade btn-atividade-secondary">
            <i class="fas fa-times-circle me-2"></i>Limpar
          </button>
          <button type="submit" class="btn-atividade btn-atividade-primary" id="btnSubmit">
            <i class="fas fa-save me-2"></i>Salvar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
</div>