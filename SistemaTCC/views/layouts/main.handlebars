<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css"/>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 72 72'%3E%3Ctext y='60' font-size='60'%3E%F0%9F%8E%B5%3C/text%3E%3C/svg%3E">
    <title>Musicoteca</title>
</head>
<body>
    <!-- Cabeçalho -->
    <header> 
      {{#if showMenu}}
        {{#if usuario}}
          <!-- Menu superior para usuário logado -->
          <nav class="navbar" id="navbar">
            <div class="navbar-container justify-content-between d-flex align-items-center">
              <div class="d-flex align-items-center">
                {{#if this.usuario.imagem}}
                  <img src="{{this.usuario.imagem}}" alt="Foto de Perfil" class="rounded-circle me-3" style="width:48px; height:48px; object-fit:cover; border:2px solid #fff; box-shadow:0 2px 8px rgba(0,0,0,0.08);">
                {{/if}}
              </div>
              <a href="/index" class="site-logo ms-auto">MUSICOTECA</a>
            </div>
          </nav>
        {{else}}
          <!-- Menu superior para visitante (não logado) -->
          <nav class="navbar" id="navbar">
            <div class="navbar-container d-flex align-items-center justify-content-between">
              <a href="/index" class="site-logo">MUSICOTECA</a>
              <div class="menu-auth ms-auto d-flex align-items-center" style="gap: 1rem;">
                <a href="/login" class="btn btn-outline-light me-0">Login</a>
                <a href="/escolher" class="btn btn-outline-light">Cadastro</a>
              </div>
            </div>
          </nav>
        {{/if}}
      {{/if}}
    </header>

 {{#if showBackButton}}
    <!-- Botão Voltar - Posicionamento Fixo -->
    <div class="back-button-container">
        <button type="button" class="back-button" onclick="history.back()">
            <i class="bi bi-arrow-left"></i>
        </button>
    </div>
    {{/if}}

    <!-- Menu Lateral para NÃO logado, exceto na página de escolher -->
{{#unless usuario}}
  {{#unless paginaEscolher}}
    <div class="sidebar">
        <ul class="sidebar-nav">
          <a href="/index">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-home"></i></span>
                <span class="sidebar-text">Início</span>
            </li>
            </a>
            <a href="/login">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-sign-in-alt"></i></span>
                <span class="sidebar-text">Login</span>
            </li>
            </a>
        </ul>
    </div>
  {{/unless}}
{{/unless}}

<!-- Menu Lateral para logado -->
{{#if usuario}}
  {{#if (eq usuario.tipo 'adm')}}
    {{! Menu do Administrador - APENAS para admin }}
    <div class="sidebar">
        <ul class="sidebar-nav">
            <a href="/painelM">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-guitar"></i></span>
                <span class="sidebar-text">Painel do Músico</span>
            </li></a>

            <a href="/admin/validar-usuarios">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-user-check"></i></span>
                <span class="sidebar-text">Validar Usuários</span>
            </li></a>

            <a href="/admin/listar-usuarios">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-users"></i></span>
                <span class="sidebar-text">Todos os Usuários</span>
            </li></a>

            <a href="/perfis">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-address-card"></i></span>
                <span class="sidebar-text">Perfis Públicos</span>
            </li></a>
        </ul>
        <ul class="sidebar-footer">
            <a href="/logout" class="nav-link">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-sign-out-alt"></i></span>
                <span class="sidebar-text">Sair</span>
            </li>
            </a>
        </ul>
    </div>

  {{else if showSidebar}}
    {{! Menu do Músico Normal }}
    <div class="sidebar">
        <ul class="sidebar-nav">
            <a href="/painelM">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-guitar"></i></span>
                <span class="sidebar-text">Painel do Músico</span>
            </li> </a>

            <a href="/novaAtividade">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-plus-circle"></i></span>
                <span class="sidebar-text">Criar Atividades</span>
            </li> </a>

            <a href="/submissoes">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-tasks"></i></span>
                <span class="sidebar-text">Minhas Submissões</span>
            </li>
            </a>
            <a href="/perfis">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-users"></i></span>
                <span class="sidebar-text">Perfis</span>
            </li>
            </a>
        </ul>
        <ul class="sidebar-footer">
            <a href="/logout" class="nav-link">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-sign-out-alt"></i></span>
                <span class="sidebar-text">Sair</span>
            </li>
            </a>
        </ul>
    </div>
  {{/if}}

  {{#if showSidebarE}}
    {{! Menu do Educador }}
    <div class="sidebar">
        <ul class="sidebar-nav">
            <a href="/sugeridasA">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-lightbulb"></i></span>
                <span class="sidebar-text">Atividades Sugeridas</span>
            </li>
            </a>
            <a href="/historicoA">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-history"></i></span>
                <span class="sidebar-text">Histórico de Atividades</span>
            </li>
            </a>
        </ul>
        <ul class="sidebar-footer">
            <a href="/logout">
            <li class="sidebar-item">
                <span class="sidebar-icon"><i class="fas fa-sign-out-alt"></i></span>
                <span class="sidebar-text">Sair</span>
            </li></a>
        </ul>
    </div>
  {{/if}}
{{/if}}
      
    <!-- Conteúdo Principal -->
    <main class="container mt-4" style="margin-left: 70px; padding-top: 70px;">
        {{{body}}}
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/public/scripts/cadastros.js"></script>
    <script src="/public/scripts/escolher.js"></script>
    <script src="/public/scripts/menuLateral.js"></script>
    <script src="/public/scripts/isOwnProfile.js"></script>
    <script src="/public/scripts/historico.js"></script>
    <script src="/public/scripts/sugeridas.js"></script>
    <script src="/public/scripts/atividade.js"></script>
    <script src="/public/scripts/pesquisas.js"></script>
</body>
</html>